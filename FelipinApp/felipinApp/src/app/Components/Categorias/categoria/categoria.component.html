<h2>Categorias</h2>

<button (click)="cambiarVisibilidad()" mat-flat-button>Agregar categoria</button>
@if (formVisible) {
    <div>
        <form (submit)="guardarCambios()" [formGroup]="form">
            <mat-form-field appearance="outline">
                <mat-label>Nombre</mat-label>
                <input matInput [formControl]="form.controls.nombre">
                <mat-error>El campo nombre es requerido</mat-error>
            </mat-form-field>
    
            <div class="botones">
                <button mat-flat-button type="submit" [disabled]="form.invalid">Guardar</button>
                <button mat-stroked-button (click)="cambiarVisibilidad()" >Cancelar</button>
            </div>
        </form>
    </div>
}



<h4>Listado de categorias</h4>

@if (!listaCategorias) {
    <mat-spinner class="spinner"></mat-spinner>
}
@else {
    <ng-container>
        <table mat-table [dataSource]="listaCategorias" class="mat-elevation-z8">
            <ng-container matColumnDef="Id">
                <th mat-header-cell *matHeaderCellDef>Id</th>
                <td mat-cell *matCellDef="let elemento">{{elemento.id}}</td>
            </ng-container>
    
            <ng-container matColumnDef="Nombre">
                <th mat-header-cell *matHeaderCellDef>Nombre</th>
                <td mat-cell *matCellDef="let elemento">{{elemento.nombre}}</td>
            </ng-container>
    
            <ng-container matColumnDef="Acciones">
                <th mat-header-cell *matHeaderCellDef>Acciones</th>
                <td mat-cell *matCellDef="let elemento">
                    <button mat-flat-button (click)="openDialog(elemento)">Editar</button>
                    <button mat-flat-button color="warn" 
                            [swal]="{title: 'Confirmación', text:'¿Deseas borrar esta categoria?' , showCancelButton: true}"
                            (confirm)="eliminarCategoria(elemento.id)" 
                            >Borrar</button>
                </td>
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="nombresColumnas"></tr>
            <tr mat-row *matRowDef="let row;columns: nombresColumnas"></tr>
        </table>
    </ng-container>
}


